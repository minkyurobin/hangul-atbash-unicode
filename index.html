<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>한글 아토바쉬 암호기</title>

<!-- Spoqa Han Sans Neo 웹폰트 CDN -->
<link href="https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans/css/SpoqaHanSansNeo.css" rel="stylesheet" />

<style>
  /* 전체 초기화 */
  * {
    margin: 0; padding: 0;
    box-sizing: border-box;
  }

  body, html {
    height: 100%;
    background: linear-gradient(135deg, #2c003e 0%, #3b0070 100%);
    font-family: 'Spoqa Han Sans Neo', 'Nanum Gothic', 'Noto Sans KR', sans-serif;
    color: #e0d7ff;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem;
  }

  .container {
    width: 100%;
    max-width: 720px;
    background: rgba(50, 10, 70, 0.6);
    border-radius: 20px;
    padding: 2.5rem 3rem;
    box-shadow: 0 0 30px #6f54d1;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  h1 {
    font-weight: 900;
    font-size: 3rem;
    margin-bottom: 2rem;
    letter-spacing: -0.03em;
    color: #c1b9ff;
    user-select: none;
    text-align: left;
  }

  label {
    display: block;
    font-weight: 700;
    margin-bottom: 0.6rem;
    color: #b4a9ff;
  }

  select, textarea {
    width: 100%;
    padding: 1rem 1.2rem;
    font-size: 1.15rem;
    border-radius: 12px;
    background: rgba(95, 45, 190, 0.3);
    border: none;
    color: #eee;
    font-family: inherit;
    box-shadow: inset 0 0 10px rgba(110, 75, 220, 0.6);
    resize: vertical;
    text-align: left;
    transition: background-color 0.3s ease;
  }

  select:focus, textarea:focus {
    outline: none;
    background: rgba(130, 100, 255, 0.7);
    box-shadow: 0 0 15px #bb9fff;
  }

  button {
    margin-top: 1.5rem;
    width: 100%;
    padding: 1.3rem 0;
    font-size: 1.25rem;
    font-weight: 700;
    color: #f0eaff;
    background: linear-gradient(135deg, #5f36cd, #8a64e6);
    border: none;
    border-radius: 14px;
    cursor: pointer;
    box-shadow: 0 6px 18px rgba(105, 60, 255, 0.7);
    transition: background 0.3s ease, transform 0.25s ease;
  }

  button:hover {
    background: linear-gradient(135deg, #8865e3, #ad94ff);
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(130, 90, 255, 0.9);
  }

  #output {
    margin-top: 1rem;
    background: rgba(70, 25, 130, 0.3);
    border-radius: 12px;
    min-height: 140px;
    padding: 1.5rem 1.8rem;
    font-size: 1.2rem;
    color: #ddd;
    white-space: pre-wrap;
    user-select: text;
    font-weight: 500;
    text-align: left;
    font-family: inherit;
    box-shadow: inset 0 0 15px rgba(110, 85, 230, 0.6);
  }

  #copyBtn {
    margin-top: 0.6rem;
    background: #7a52c9;
    padding: 0.7rem 1.2rem;
    border-radius: 12px;
    border: none;
    font-weight: 600;
    cursor: pointer;
    color: #f4eeff;
    box-shadow: 0 5px 12px rgba(120, 70, 230, 0.7);
    transition: background 0.3s ease;
  }

  #copyBtn:hover {
    background: #9c7fff;
  }

  .footer {
    margin-top: 2.3rem;
    font-size: 0.9rem;
    text-align: center;
    color: #9e90ffcc;
    user-select: none;
  }

  /* 변환 원리 문단 숨김 처리 요청 */
</style>
</head>
<body>

<main class="container" role="main" aria-label="한글 아토바쉬 암호기">
  <h1>한글 아토바쉬 암호기</h1>

  <label for="method">암호화 방식 선택</label>
  <select id="method" aria-label="암호화 방식 선택">
    <option value="unicode">유니코드 완성형 대칭 치환</option>
    <option value="jamo">초성·중성·종성 자모 대칭 치환</option>
  </select>

  <label for="input">원문 입력</label>
  <textarea id="input" rows="5" placeholder="한글 문장을 입력하세요..."></textarea>

  <button onclick="convert()">변환하기</button>

  <label for="output">변환 결과</label>
  <div id="output" tabindex="0" aria-live="polite" aria-atomic="true"></div>
  <button id="copyBtn" onclick="copyOutput()">복사하기</button>

  <div class="footer">© 2025 제민규의 아토바쉬 암호기</div>
</main>

<script>
  const CHO = ["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"];
  const JUNG = ["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"];
  const JONG = ["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"];

  const HANGUL_START = 0xAC00;
  const HANGUL_END = 0xD7A3;

  function atbashUnicode(ch) {
    const code = ch.charCodeAt(0);
    if (code >= HANGUL_START && code <= HANGUL_END) {
      const offset = code - HANGUL_START;
      const mirrorOffset = (HANGUL_END - HANGUL_START) - offset;
      return String.fromCharCode(HANGUL_START + mirrorOffset);
    }
    return ch;
  }

  function atbashJamo(ch) {
    const code = ch.charCodeAt(0);
    if (code < HANGUL_START || code > HANGUL_END) return ch;

    const offset = code - HANGUL_START;
    const jong = offset % 28;
    const jung = Math.floor(offset / 28) % 21;
    const cho = Math.floor(offset / (28 * 21));

    const newCho = CHO[CHO.length - 1 - cho];
    const newJung = JUNG[JUNG.length - 1 - jung];
    const newJong = JONG[JONG.length - 1 - jong];

    const newChoIdx = CHO.indexOf(newCho);
    const newJungIdx = JUNG.indexOf(newJung);
    const newJongIdx = JONG.indexOf(newJong);

    const newCode = HANGUL_START + (newChoIdx * 21 * 28) + (newJungIdx * 28) + newJongIdx;
    return String.fromCharCode(newCode);
  }

  function convert() {
    const method = document.getElementById("method").value;
    const input = document.getElementById("input").value;
    let output = "";

    for (let ch of input) {
      output += (method === "unicode") ? atbashUnicode(ch) : atbashJamo(ch);
    }

    document.getElementById("output").textContent = output;
  }

  function copyOutput() {
    const outputDiv = document.getElementById("output");
    if (!outputDiv.textContent) return alert("복사할 변환 결과가 없습니다.");
    navigator.clipboard.writeText(outputDiv.textContent).then(() => {
      alert("변환 결과가 복사되었습니다!");
    }, () => {
      alert("복사 실패! 브라우저에서 클립보드 접근 권한을 허용해주세요.");
    });
  }
</script>

</body>
</html>
